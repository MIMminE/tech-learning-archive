## Amazon EC2 기초 
Amazon Elastic Compute Cloud는 AWS가 제공하는 가장 기초적인 클라우드 컴퓨팅 서비스이며 가장 중요한 서비스 중 하나로 꼽힌다. 
그 이유로는 모든 서비스가 직간접적으로 EC2와 연관되어 있을 정도로 여러 서비스의 근간을 이루고 있기 때문이다.

EC2의 특징에는 다음과 같은 것들이 있다.
- 초 단위의 온 디멘드 가격 모델을 제공하고 있으며, 미리 약정을 함으로써 조금 더 저렴하게 사용도 가능하다.
- 구축 속도가 굉장히 빨라 전 세계에 수많은 인스턴스를 동시에 생성하더라도 오래 걸리지 않는다.
- EC2는 S3(스토리지), RDS(데이터베이스), ELB(로드 밸런서) 등 다양한 AWS 서비스와 쉽게 연동할 수 있다. 이러한 연동성은 사용자가 별도의 복잡한 인프라 구축 없이 강력하고 확장성 있는 클라두으 환경을 빠르게 만들 수 있다.

실무에서는 EC2 인스턴스를 직접 생성하고 관리하는 경우도 존재하지만, 최근에는 EC2를 기반으로 하는 다양한 IaaS나 서비스형 인프라를 더 많이 사용하는 추세이다.
매니지드 서비스들은 자동으로 확장, 장애 복구 기능이 내장되어 있는 경우가 많고 클라우드를 전문적으로 다루지 않았던 개발자들도 손쉽게 고급 기술을 구현해낼 수 있기 때문이다. 

즉, EC2를 직접 사용하는 것은 자유도와 유연성이 높지만 그만큼 운영에 대한 고려사항 전체를 파악하고 있어야 한다는 부담이 있기 때문에 미리 만들어둔 우수한 매니지드 서비스 사용이 증가하고 있는 것이다.
대표적인 매니지드 서비스로 ECS/EKS, RDS, Elastic Beanstalk, AWS Lambda 등이 있다.

## EC2 스토리지 
EC2 인스턴스가 사용하는 스토리지의 형태로는 크게 `EBS(Elastic Block Store)`와 `인스턴스 스토어`가 있다.
- `EBS` : EC2 인스턴스와 연결하여 사용하는 외부 블록 스토리지이다. EC2 인스턴스가 삭제되면 내부 스토리지에 보관되어 있는 데이터들도 모두 사라지지만 EBS 연결을 통해 보관하는 데이터들을 외부에 저장하면 인스턴스로부터 독립적으로 데이터를 관리할 수 있다.
여러 인스턴스 간에 공유는 불가능하고, 한 번에 하나의 EC2 인스턴스와 연결될 수 있으며, 같은 가용영역(AZ)에 있는 EC2와만 연결될 수 있다.
- `인스턴스 스토어` : EC2 인스턴스가 생성되면 내부에 스토리지가 만들어져 데이터를 관리하게 된다. 물리적으로 직접 연결되어 있어 속도가 빠르지만 인스턴스가 사라지면 함께 사라진다는 특징이 있다.

## 인스턴스 유형 
컴퓨팅 리소스를 임대할 때는 수행하려는 작업에 가장 적합한 EC2 인스턴스 유형을 선택하는 것이 중요하다.
AWS에서는 CPU, 메모리, 스토리지, 네트워크 성능 등 다양한 자원 구성이 미리 정해진 여러 가지 인스턴스 사양을 제공하며, 
작업의 특성에 따라 CPU 집약적인 작업에 최적화된 유형, 대용량 메모리를 제공하는 유형, 또는 고속·대용량 스토리지를 지원하는 유형 등 다양한 선택지를 마련하고 있다.

인스턴스 유형은 다양하고 자주 변하는 부분이며, 실무에서 사용하기 전에 한번 확인해보고 상황에 걸맞는 유형을 선택하면 된다. 대체로 범용 유형을 사용하더라도 문제는 없다.

## Elastic Block Store (EBS)
`EBS(Elastic Block Store)`는 EC2 인스턴스에서 사용할 수 있는 영구적인 블록 스토리지 볼륨을 제공한다. 이를 사용할 경우 EC2와 동일한 가용 영역 내에서 
자동으로 데이터들이 분산 복제되어 장애가 발생해도 데이터를 안전하게 보호하며, 99.999%의 높은 가용성과 장애 내구성을 목표로 설계, 제공하고 있다.

보통 EC2 인스턴스는 종료(Terminate) 시 모든 데이터가 사라지지만, EBS 볼륨은 별도로 삭제하지 않는 한 그대로 유지된다. 
때문에 EC2 인스턴스를 다시 생성하거나, 새로운 유형의 EC2를 생성해 연결하면 해당 볼륨의 데이터를 다시 사용할 수 있다. 

네트워크를 통해 인스턴스와 볼륨이 연결되며 이를 `느슨한 결합`이라고 한다.

### EBS 유형
데이터를 저장하는 스토리지도 용도에 따라 최적화된 유형을 제공하고 있다. 각 유형은 `IOPS`, `Throughput`, `비용`에 있어 차이를 보인다. 

- `범용 SSD (General Purpose SSD, GP)` : 범용 서버, 개발 및 테스트 환경, 소규모 데이터베이스에 적합하다.  
- `프로비저닝된 IOPS SSD (Provisioned IOPS SSD)` : 높은 초당 입출력 처리량 제공, 낮은 지연시간이 필요한 작업에 적합하다. 
- `처리량 최적화 HDD (Throughput Optimized HDD)` : 높은 Throughput 처리량 제공, 한 번에 큰 파일을 읽고 쓰는 작업에 적합하다.
- `콜드 HDD (Cold HDD)` : 저렴한 비용, 접근이 적은 데이터 보관 용도에 적합하다.


### IOPS(Input/Output Operations Per Second) 와 Throughput
`IOPS`는 스토리지가 1초에 처리할 수 있는 입출력 작업의 횟수를 나타내는 지표이다. 한번에 오가는 데이터의 크기는 작지만 속도가 빨라 작은 파일을 자주 읽고 쓰는 작업에는 높은 IOPS 가 유리하다. 온라인 서비스의 세션 저장이나 은행 거래 시스템 등의 현대 웹에서 자주 사용된다.

`Throughput`은 스토리지가 한번에 처리할 수 있는 데이터의 총량을 나타내는 지표이다. 한번에 대용량을 운반할 수 있으므로 대용량 자료를 읽고 쓰는 작업에는 높은 Throughput 이 유리하다. 빅데이터 분석이나 로그 분석 등의 작업에 적합하다.

이러한 차이는 하드웨어 구조와 데이터 처리 방식에 의해 발생한다. `HDD(하드디스크 드라이브)`는 회전하는 플래터와 움직이는 헤드로 구성되어 있고 파일을 읽거나 쓰기 위해서는 헤드가 해당 데이터를 찾아야 하는데 물리적으로 헤드가 이동하는 시간이 걸리기에
찾아야 하는 대상의 개수가 많아지면 시간이 오래 걸리게 되어 IOPS가 낮다. 

반면, `SSD(솔리드 스테이트 드라이브)`는 반도체 기반으로 HDD의 헤드와 같이 움직이는 부품이 없이 메모리 셀에 접근하는 방식이라 높은 IOPS를 제공할 수 있다. 
또한 Throughput 도 일반적으로 SSD가 높은 성능을 보이기는 하지만 비용적인 측면까지 함께 고려하면 IOPS가 중요한 작업이 아니라면 굳이 SSD를 항상 선택할 필요는 없다.


## AMI(Amazon Machine Image)
EC2 인스턴스를 시작하는 데 필요한 정보를 담고 있는 가상 머신 템플릿이다. 운영체제, 애플리케이션 서버, 애플리케이션/라이브러리, 설정 파일, 데이터 볼륨 스냅샷 등을 포함한
EC2 인스턴스의 이미지라고 할 수 있으며, 현재 상태의 인스턴스를 AMI로 보관하고 있다가 추후 재생성이나 복구 등에 활용할 수 있다.
AWS 에서 기본으로 제공하는 OS 기본 이미지들도 AMI의 일종이며, 여러 공식 서드파티 공급처에서 제공하는 사용 AMI도 존재하며, 사용자가 직접 만들어서 배포하는 퍼플릭 AMI 등 다양한 형태로 존재한다.

커스텀 AMI는 EC2 인스턴스의 현재 설치된 상태를 저장해두는 템플릿으로써 동일한 환경을 확장하거나 복구하는 용도로 주로 사용된다.
